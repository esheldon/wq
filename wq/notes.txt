Some things to think about:

    - will the socket read work with two simultaneous requests?
    - What if the result is larger than the buffer?  We would have
      to keep reading until the read bytes are not equal to buffsize
      I guess.  This is a worry for listings where it could get long.

And make the matching be

Compulsory arguments denoted by (*)

* bycore: require a certain number of cores on any node
  Options: in_group, not_in_group, N
  Nodes must be in_group if specified
  Nodes should not be in not_in_group if specified
  We allocate a total of N cores, default = 1

* bycore1: rquires a certain number of cores on a single node
  Options: in_group, not_in_group, N
  Nodes must be in_group if specified
  Nodes should not be in not_in_group if specified
  We allocate a total of N cores demand them to be on the same 
  node, default = 1

* bynode: require a certain number of full nodes 
  Options: in_group, not_in_group, N, min_cores
  Nodes must be in_group if specified
  Nodes should not be in not_in_group if specified
  We allocate a total of N nodes, default = 1
  Each node must have at least min_cores total cores.
  We never match a partially loaded nodes, we always demand full nodes

* byhost: require exact hostname match 
  Options: host (*) , N
  We demand N cores on host host.

* bygrp: requires a full (single) group of nodes
  Options: group (*)
  We demand the entire group group. 
  All nodes must be completelly free on that group for a match



